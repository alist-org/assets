var D=Object.defineProperty,I=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var A=(r,t,o)=>t in r?D(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o,d=(r,t)=>{for(var o in t||(t={}))F.call(t,o)&&A(r,o,t[o]);if(k)for(var o of k(t))G.call(t,o)&&A(r,o,t[o]);return r},f=(r,t)=>I(r,L(t));import{h as H,j as J,R as e,k as N,r as R,n as x,p as V,G as c,aB as _,aC as W,aD as O,aE as m,aF as X,aG as p,aH as z,aI as K,aJ as Q,aK as U,aL as Y,aM as Z,aN as $,E as ee,Q as te,U as ae,W as ne,X as re,Y as se,Z as le,as as oe,_ as ce}from"./vendor.03ff3900.js";import{b as y}from"./index.esm.ef5c8b53.js";import{F as g}from"./form-item.132e3ac5.js";import{c as ie,r as ue}from"./copy-clip.08e8f9de.js";import"./index.78f9d4ac.js";const T={id:0,name:"",type:"",status:"",index:0};function de(r,t){switch(r){case"string":return t||"";case"bool":return t?t==="true":!1;case"select":return t||"";case"number":return t?parseInt(t):0}}const me=[{name:"name",label:"Virtual path",type:"string",required:!0},{name:"index",label:"index",type:"number",required:!0,description:"for sort"}],ge=()=>{const r=H(),{t}=J(),[o,w]=e.useState([]),[b,j]=e.useState({}),[s,i]=e.useState(T),[C,h]=e.useState(!1),[M,S]=e.useState(!1),[P,v]=e.useState(!1),u=N(),q=()=>{y.get("drivers").then(a=>{const n=a.data;n.code!==200?r({title:t(n.message),status:"error",duration:3e3,isClosable:!0}):j(n.data)})},E=()=>{S(!0),y.get("accounts").then(a=>{S(!1);const n=a.data;n.code!==200?r({title:t(n.message),status:"error",duration:3e3,isClosable:!0}):w(n.data)})};return R.exports.useEffect(()=>{E(),q()},[]),e.createElement(x,{w:"full"},e.createElement(V,null,e.createElement(c,{onClick:()=>{i(T),h(!1),u.onOpen()}},t("Add")),e.createElement(c,{colorScheme:"orange",isLoading:M,onClick:()=>{E()}},t("Refresh"))),e.createElement(x,{overflowX:"auto"},e.createElement(_,{w:"full"},e.createElement(W,null,e.createElement(O,null,e.createElement(m,null,t("Virtual path")),e.createElement(m,null,t("type")),e.createElement(m,null,t("root_folder")),e.createElement(m,null,t("index")),e.createElement(m,null,t("status")),e.createElement(m,null,t("operation")))),e.createElement(X,null,o.map(a=>e.createElement(O,{key:a.id},e.createElement(p,null,a.name),e.createElement(p,null,a.type),e.createElement(p,null,a.root_folder),e.createElement(p,null,a.index),e.createElement(p,null,a.status),e.createElement(p,{whiteSpace:"nowrap"},e.createElement(c,{onClick:()=>{i(a),h(!0),u.onOpen()}},t("Edit")),e.createElement(c,{ml:1,colorScheme:"green",onClick:()=>{const n=JSON.stringify(a,(l,B)=>{if(l!=="id")return B},2);ie(n),r({title:t("Copied"),status:"success",duration:3e3,isClosable:!0})}},t("Copy")),e.createElement(z,null,e.createElement(K,null,e.createElement(c,{ml:"1",colorScheme:"red"},t("Delete"))),e.createElement(Q,{whiteSpace:"normal"},e.createElement(U,null),e.createElement(Y,null),e.createElement(Z,null,t("Confirmation!")),e.createElement($,null,e.createElement(ee,{mb:"1"},t('Are you sure you want to delete "{{name}}" ?',{name:a.name})),e.createElement(c,{colorScheme:"red",onClick:()=>{y.delete("account",{params:{id:a.id}}).then(n=>{const l=n.data;l.code!==200?r({title:t(l.message),status:"error",duration:3e3,isClosable:!0}):(r({title:t(l.message),status:"success",duration:3e3,isClosable:!0}),E())})}},t("Confirm"))))))))))),e.createElement(te,{isOpen:u.isOpen,onClose:u.onClose,size:"6xl"},e.createElement(ae,null),e.createElement(ne,null,e.createElement(re,null,t(C?"Save":"Add")),e.createElement(se,null),e.createElement(le,{pb:6},e.createElement(oe,{minChildWidth:"250px",spacing:"2"},e.createElement(g,{type:"select",readOnly:C,required:!0,label:t("type"),value:s.type,values:Object.keys(b),onChange:a=>{const n=d({},s);n.type=a;for(const l of b[a])Object.keys(n).includes(l.name)||(n[l.name]=de(l.type,l.default));i(n)}}),me.map(a=>{var n;return e.createElement(g,{key:a.name,type:a.type,label:a.label,value:s[a.name],description:a.description,required:a.required,values:(n=a.values)==null?void 0:n.split(","),onChange:l=>{a.type!=="bool"?i(f(d({},s),{[a.name]:l})):i(f(d({},s),{[a.name]:!s[a.name]}))}})}),s.type&&b[s.type].map(a=>{var n;return e.createElement(g,{key:a.name,type:a.type,label:a.label,value:s[a.name],description:a.description,required:a.required,values:(n=a.values)==null?void 0:n.split(","),onChange:l=>{a.type!=="bool"?i(f(d({},s),{[a.name]:l})):i(f(d({},s),{[a.name]:!s[a.name]}))}})}))),e.createElement(ce,null,e.createElement(c,{mr:3,colorScheme:"gray",onClick:u.onClose},t("Cancel")),e.createElement(c,{mr:3,colorScheme:"green",onClick:()=>{ue().then(a=>{try{const n=JSON.parse(a);s.id&&(n.id=s.id),i(n)}catch(n){r({title:t("Invalid JSON"),status:"error",duration:3e3,isClosable:!0})}})}},t("Paste")),e.createElement(c,{isLoading:P,onClick:()=>{console.log(s),v(!0),y.post(`account/${C?"save":"create"}`,s).then(a=>{v(!1);const n=a.data;n.code!==200?(r({title:t(n.message),status:"error",duration:3e3,isClosable:!0}),!C&&n.code!==400&&(E(),u.onClose())):(r({title:t(n.message),status:"success",duration:3e3,isClosable:!0}),E(),u.onClose())})}},t("Save"))))))};export{ge as default};

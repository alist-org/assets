var ft=Object.defineProperty,pt=Object.defineProperties;var gt=Object.getOwnPropertyDescriptors;var _e=Object.getOwnPropertySymbols;var mt=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var Pe=(e,t,r)=>t in e?ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$=(e,t)=>{for(var r in t||(t={}))mt.call(t,r)&&Pe(e,r,t[r]);if(_e)for(var r of _e(t))ht.call(t,r)&&Pe(e,r,t[r]);return e},Ie=(e,t)=>pt(e,gt(t));var be=(e,t,r)=>new Promise((n,o)=>{var s=l=>{try{f(r.next(l))}catch(d){o(d)}},u=l=>{try{f(r.throw(l))}catch(d){o(d)}},f=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,u);f((r=r.apply(e,t)).next())});import{r as c,u as H,h as Y,j as T,k as Be,l as ie,R as a,n as B,I as ve,H as ye,P as wt,o as Re,p as D,q,s as W,F as ce,L as K,t as bt,v as Z,x as vt,C as G,V as xe,y as Te,z as yt,A as Ae,D as ze,E as Q,G as le,J as i,K as xt,M as Le,N as $e,O as He,Q as Et,U as Ct,W as St,X as Mt,Y as Ft,Z as Ot,_ as kt,$ as jt,a0 as _t}from"./vendor.53f783ab.js";import{a as De,i as ue,b as ee,I as _,G as k,M as Pt,B as It,c as Bt,d as Rt,F as Tt,g as At,e as zt,f as Lt,h as $t,j as Ht,k as Dt,l as Ne,m as Nt,n as Ut,o as Vt,p as qt,q as Wt,r as Kt,s as Gt,D as Jt,t as Xt,u as Yt,v as Zt,w as Qt,O as er,x as tr}from"./index.esm.b0b0f889.js";import{_ as Ue}from"./index.12fd3178.js";import{c as rr}from"./copy-clip.08e8f9de.js";const Ve=(...e)=>e.join("/").replace(/\/{2,}/g,"/");let Ee;const nr=De.CancelToken,ar=()=>{const{password:e,page:t}=c.exports.useContext(_),{pathname:r}=H();let n=r;return{path:()=>ue.post("path",{path:n,password:e,page_num:t.page_num,page_size:t.page_size},{cancelToken:new nr(function(s){Ee=s})}),cancelPath:()=>{Ee&&Ee()},mkdir:o=>{const s=Ve(n,o);return ee.post("mkdir",{path:s})},rename:(o,s)=>{const u=Ve(n,s);return ee.post("rename",{name:o,path:u})},move:(o,s)=>ee.post("move",{src_dir:n,dst_dir:s,names:o}),copy:(o,s)=>ee.post("copy",{src_dir:n,dst_dir:s,names:o}),refresh:()=>ee.post("refresh",{path:n})}};function or(e){return k({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M352 115h90c3.3 0 6-2.7 6-6 0-8.2-3.7-16-10-21.3l-77.1-64.2c-4.9-4.1-14.2-7.4-20.6-7.4-4.1 0-7.4 3.3-7.4 7.4V96c.1 10.5 8.6 19 19.1 19z"}},{tag:"path",attr:{d:"M307 96V16H176c-17.6 0-32 14.4-32 32v336c0 17.6 14.4 32 32 32h240c17.6 0 32-14.4 32-32V141h-96c-24.8 0-45-20.2-45-45z"}},{tag:"path",attr:{d:"M116 412V80H96c-17.6 0-32 14.4-32 32v352c0 17.6 14.4 32 32 32h256c17.6 0 32-14.4 32-32v-20H148c-17.6 0-32-14.4-32-32z"}}]})(e)}function sr(e){return k({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M480 119c0-13.3-9.4-23-22.8-23H198.9c-2.8 0-4.3-.6-6.1-2.4l-22.5-22.5-.2-.2c-4.9-4.6-8.9-6.9-17.3-6.9H56.7C42.9 64 32 74.3 32 87v73.7c0 1.6 1.7 1.5 3 .7s5-1.4 7-1.4h428c2 0 5.7.6 7 1.4 1.3.8 3 .9 3-.7V119zM32 416.4c0 17.5 14.2 31.6 31.6 31.6H448c17.6 0 32-14.4 32-32V204c0-8.8-7.2-16-16-16H48c-8.8 0-16 7.2-16 16v212.4z"}}]})(e)}const ir=(e=!1)=>{const{type:t}=c.exports.useContext(_);let{pathname:r}=H(),n="/";n==="/"&&(n=window.location.origin+"/");let o=r.endsWith("/")?r.slice(0,-1):r;return t==="file"&&(o=o.substring(0,o.lastIndexOf("/"))),e?`${n}p${o}`:`${n}d${o}`},cr=e=>Pt.hashStr(e),qe=e=>cr(e).slice(8,24),lr=()=>{const{getSetting:e,password:t,loggedIn:r}=c.exports.useContext(_);return(n,o=!0)=>{const s=o?encodeURI(n):n;if(e("check down link")!=="true")return s;const u=n.split("/").pop(),f=localStorage.getItem("admin-token");if(r){const d=qe(`alist-${f}-${u}`);return s+(o?encodeURI(`?sign=${d}`):`?sign=${d}`)}if(!t)return s;const l=qe(`alist-${t}-${u}`);return s+(o?encodeURI(`?pw=${l}`):`?pw=${l}`)}},We=(e=!1,t=!0)=>{const r=ir(e),n=lr(),{files:o}=c.exports.useContext(_);return(s=void 0)=>{s||(s=o[0]);let u=r;return u.endsWith(s.name)||(u=`${u}/${s.name}`),n(u,t)}};function ur(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(o){o(r)}),(n=e.get("*"))&&n.slice().map(function(o){o(t,r)})}}}const Ce=ur();function Ke(e){if(!e)return"-";const t=1024;return e<t?e+"B":e<Math.pow(t,2)?(e/t).toFixed(2)+"K":e<Math.pow(t,3)?(e/Math.pow(t,2)).toFixed(2)+"M":e<Math.pow(t,4)?(e/Math.pow(t,3)).toFixed(2)+"G":(e/Math.pow(t,4)).toFixed(2)+"T"}const Ge=(...e)=>e.join("/").replace(/\/{2,}/g,"/");let Je=new Date().valueOf(),Xe=0;const dr=c.exports.forwardRef((e,t)=>{c.exports.useImperativeHandle(t,()=>({upload:()=>{u(0),document.querySelector("#upload-input").click()}}));const{password:r}=c.exports.useContext(_),{pathname:n}=H(),o=Y(),[s,u]=c.exports.useState(50),{t:f}=T(),{isOpen:l,onOpen:d,onClose:m}=Be(),p=ie("gray.100","gray.600"),[M,x]=c.exports.useState("Uploading");return a.createElement(B,null,a.createElement(ve,{display:"none",type:"file",multiple:!0,id:"upload-input",onChange:F=>{const j=F.target.files,I=j[0];if(!j||!I)return;d();const O=new FormData;for(let h=0;h<j.length;h++)O.append("files",j[h],j[h].name);O.append("path",n),O.append("password",r),ue.post("upload",O,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:h=>{if(h.lengthComputable){const S=h.loaded/h.total*100|0;console.log("complete",S),u(S);const P=new Date().valueOf(),b=(P-Je)/1e3;if(b>1){const A=(h.loaded-Xe)/b,v=(h.total-h.loaded)/A;x(`${Ke(A)}/s  (${f("about remaining")} ${Math.round(v)}${f("s")})`),Je=P,Xe=h.loaded}S===100&&x("Back-end processing")}}}).then(h=>{m();const S=document.querySelector("#upload-input");S.value="";const P=h.data;o({title:f(P.message),status:P.code===200?"success":"error",duration:3e3,isClosable:!0}),Ce.emit("refresh")})}}),a.createElement(B,{zIndex:99,w:{base:"80vw",md:"40vw"},position:"fixed",bottom:"20px",right:"20px",bgColor:p,rounded:"lg",p:4,display:l?"block":"none"},a.createElement(ye,{mb:2,fontSize:20},f(M),"..."),a.createElement(wt,{hasStripe:!0,isAnimated:!0,rounded:"lg",value:s})))});function zn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#546E7A",points:"38,33 38,5 34,5 34,33 28,33 36,43 44,33"}},{tag:"g",attr:{fill:"#2196F3"},child:[{tag:"path",attr:{d:"M16.8,17.2h-5.3l-1.1,3H6.9L12.6,5h2.9l5.7,15.2h-3.2L16.8,17.2z M12.2,14.5H16l-1.9-5.7L12.2,14.5z"}},{tag:"path",attr:{d:"M12.4,40.5H20V43H8.4v-1.9L16,30.3H8.4v-2.5h11.4v1.7L12.4,40.5z"}}]}]})(e)}function Ln(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"circle",attr:{fill:"#00ACC1",cx:"24",cy:"24",r:"20"}},{tag:"circle",attr:{fill:"#eee",cx:"24",cy:"24",r:"16"}},{tag:"rect",attr:{x:"23",y:"11",width:"2",height:"13"}},{tag:"rect",attr:{x:"26.1",y:"22.7",transform:"matrix(-.707 .707 -.707 -.707 65.787 27.25)",width:"2.3",height:"9.2"}},{tag:"circle",attr:{cx:"24",cy:"24",r:"2"}},{tag:"circle",attr:{fill:"#00ACC1",cx:"24",cy:"24",r:"1"}}]})(e)}function $n(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"g",attr:{fill:"#1565C0"},child:[{tag:"polygon",attr:{points:"24,37.1 13,24 35,24"}},{tag:"rect",attr:{x:"20",y:"4",width:"8",height:"4"}},{tag:"rect",attr:{x:"20",y:"10",width:"8",height:"4"}},{tag:"rect",attr:{x:"20",y:"16",width:"8",height:"11"}},{tag:"rect",attr:{x:"6",y:"40",width:"36",height:"4"}}]}]})(e)}function Hn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"circle",attr:{fill:"#B3E5FC",cx:"24",cy:"30",r:"15"}},{tag:"g",attr:{fill:"#1565C0"},child:[{tag:"polygon",attr:{points:"24,38.7 15,28 33,28"}},{tag:"rect",attr:{x:"21",y:"5",width:"6",height:"26"}}]}]})(e)}function Dn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"g",attr:{fill:"#1976D2"},child:[{tag:"path",attr:{d:"M38,13h-3c-5.5,0-10,4.5-10,10s4.5,10,10,10h3c5.5,0,10-4.5,10-10S43.5,13,38,13z M38,29h-3 c-3.3,0-6-2.7-6-6s2.7-6,6-6h3c3.3,0,6,2.7,6,6S41.3,29,38,29z"}},{tag:"path",attr:{d:"M13,13h-3C4.5,13,0,17.5,0,23s4.5,10,10,10h3c5.5,0,10-4.5,10-10S18.5,13,13,13z M13,29h-3 c-3.3,0-6-2.7-6-6s2.7-6,6-6h3c3.3,0,6,2.7,6,6S16.3,29,13,29z"}}]},{tag:"path",attr:{fill:"#42A5F5",d:"M33,21H15c-1.1,0-2,0.9-2,2s0.9,2,2,2h18c1.1,0,2-0.9,2-2S34.1,21,33,21z"}}]})(e)}function Nn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#546E7A",points:"38,33 38,5 34,5 34,33 28,33 36,43 44,33"}},{tag:"g",attr:{fill:"#2196F3"},child:[{tag:"path",attr:{d:"M16.4,20h-3V8.6L9.9,9.7V7.3L16,5.1h0.3V20z"}},{tag:"path",attr:{d:"M19.4,43H9.2v-2l4.8-5.1c0.4-0.4,0.7-0.8,0.9-1.1c0.2-0.3,0.5-0.6,0.6-0.9c0.2-0.3,0.3-0.5,0.3-0.8 c0.1-0.2,0.1-0.5,0.1-0.7c0-0.7-0.2-1.2-0.5-1.6c-0.3-0.4-0.8-0.6-1.4-0.6c-0.3,0-0.7,0.1-0.9,0.2c-0.3,0.1-0.5,0.3-0.7,0.5 c-0.2,0.2-0.3,0.5-0.4,0.8s-0.1,0.6-0.1,1h-3c0-0.7,0.1-1.3,0.4-1.9c0.2-0.6,0.6-1.1,1-1.6c0.5-0.4,1-0.8,1.6-1.1 c0.6-0.3,1.4-0.4,2.2-0.4c0.8,0,1.5,0.1,2.1,0.3c0.6,0.2,1.1,0.5,1.5,0.8s0.7,0.8,0.9,1.3s0.3,1.1,0.3,1.8c0,0.5-0.1,1-0.2,1.4 S18.3,34.5,18,35s-0.6,0.9-1,1.4c-0.4,0.5-0.9,1-1.4,1.5L13,40.6h6.4V43z"}}]}]})(e)}function Un(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"circle",attr:{fill:"#4CAF50",cx:"24",cy:"24",r:"21"}},{tag:"g",attr:{fill:"#fff"},child:[{tag:"rect",attr:{x:"21",y:"14",width:"6",height:"20"}},{tag:"rect",attr:{x:"14",y:"21",width:"20",height:"6"}}]}]})(e)}function Vn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"g",attr:{fill:"#1565C0"},child:[{tag:"path",attr:{d:"M13,13c0-3.3,2.7-6,6-6h10c3.3,0,6,2.7,6,6h4c0-5.5-4.5-10-10-10H19C13.5,3,9,7.5,9,13v11.2h4V13z"}},{tag:"polygon",attr:{points:"4.6,22 11,30.4 17.4,22"}}]},{tag:"g",attr:{fill:"#1565C0"},child:[{tag:"path",attr:{d:"M35,35c0,3.3-2.7,6-6,6H19c-3.3,0-6-2.7-6-6H9c0,5.5,4.5,10,10,10h10c5.5,0,10-4.5,10-10V23h-4V35z"}},{tag:"polygon",attr:{points:"30.6,26 37,17.6 43.4,26"}}]}]})(e)}function fr(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"g",attr:{fill:"#616161"},child:[{tag:"rect",attr:{x:"34.6",y:"28.1",transform:"matrix(.707 -.707 .707 .707 -15.154 36.586)",width:"4",height:"17"}},{tag:"circle",attr:{cx:"20",cy:"20",r:"16"}}]},{tag:"rect",attr:{x:"36.2",y:"32.1",transform:"matrix(.707 -.707 .707 .707 -15.839 38.239)",fill:"#37474F",width:"4",height:"12.3"}},{tag:"circle",attr:{fill:"#64B5F6",cx:"20",cy:"20",r:"13"}},{tag:"path",attr:{fill:"#BBDEFB",d:"M26.9,14.2c-1.7-2-4.2-3.2-6.9-3.2s-5.2,1.2-6.9,3.2c-0.4,0.4-0.3,1.1,0.1,1.4c0.4,0.4,1.1,0.3,1.4-0.1 C16,13.9,17.9,13,20,13s4,0.9,5.4,2.5c0.2,0.2,0.5,0.4,0.8,0.4c0.2,0,0.5-0.1,0.6-0.2C27.2,15.3,27.2,14.6,26.9,14.2z"}}]})(e)}function qn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#607D8B",d:"M44.7,11L36,19.6c0,0-2.6,0-5.2-2.6s-2.6-5.2-2.6-5.2l8.7-8.7c-4.9-1.2-10.8,0.4-14.4,4 c-5.4,5.4-0.6,12.3-2,13.7C12.9,28.7,5.1,34.7,4.9,35c-2.3,2.3-2.4,6-0.2,8.2c2.2,2.2,5.9,2.1,8.2-0.2c0.3-0.3,6.7-8.4,14.2-15.9 c1.4-1.4,8,3.7,13.6-1.8C44.2,21.7,45.9,15.9,44.7,11z M9.4,41.1c-1.4,0-2.5-1.1-2.5-2.5C6.9,37.1,8,36,9.4,36 c1.4,0,2.5,1.1,2.5,2.5C11.9,39.9,10.8,41.1,9.4,41.1z"}}]})(e)}function Wn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FF6F00",d:"M38.7,11.9l-3.1,2.5c2.2,2.7,3.4,6.1,3.4,9.5c0,8.3-6.7,15-15,15c-0.9,0-1.9-0.1-2.8-0.3l-0.7,3.9 c1.2,0.2,2.4,0.3,3.5,0.3c10.5,0,19-8.5,19-19C43,19.6,41.5,15.3,38.7,11.9z"}},{tag:"polygon",attr:{fill:"#FF6F02",points:"31,8 42.9,9.6 33.1,19.4"}},{tag:"path",attr:{fill:"#FF6F00",d:"M24,5C13.5,5,5,13.5,5,24c0,4.6,1.6,9,4.6,12.4l3-2.6C10.3,31.1,9,27.6,9,24c0-8.3,6.7-15,15-15 c0.9,0,1.9,0.1,2.8,0.3l0.7-3.9C26.4,5.1,25.2,5,24,5z"}},{tag:"polygon",attr:{fill:"#FF6F02",points:"17,40 5.1,38.4 14.9,28.6"}}]})(e)}function Kn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"g",attr:{fill:"#3F51B5"},child:[{tag:"polygon",attr:{points:"17.8,18.1 10.4,25.4 6.2,21.3 4,23.5 10.4,29.9 20,20.3"}},{tag:"polygon",attr:{points:"17.8,5.1 10.4,12.4 6.2,8.3 4,10.5 10.4,16.9 20,7.3"}},{tag:"polygon",attr:{points:"17.8,31.1 10.4,38.4 6.2,34.3 4,36.5 10.4,42.9 20,33.3"}}]},{tag:"g",attr:{fill:"#90CAF9"},child:[{tag:"rect",attr:{x:"24",y:"22",width:"20",height:"4"}},{tag:"rect",attr:{x:"24",y:"9",width:"20",height:"4"}},{tag:"rect",attr:{x:"24",y:"35",width:"20",height:"4"}}]}]})(e)}const pr=e=>{const t=c.exports.useRef(null),{t:r}=T(),{getSetting:n}=c.exports.useContext(_),[o,s]=c.exports.useState(""),u=()=>{f.push(`?s=${o}`)},f=Re();return c.exports.useEffect(()=>{var m;e.isSearch&&((m=t.current)==null||m.focus());const l=p=>{["k","K"].includes(p.key)&&p.ctrlKey&&(e.setIsSearch(!e.isSearch),p.preventDefault())};n("enable search")==="true"&&document.addEventListener("keydown",l);const d=p=>{e.setIsSearch(!1)};return document.addEventListener("click",d),()=>{document.removeEventListener("keydown",l),document.removeEventListener("click",d)}},[e.isSearch]),n("enable search")!=="true"?null:a.createElement(D,{spacing:2,onClick:l=>{l.stopPropagation()}},a.createElement(ve,{display:e.isSearch?"block":"none",value:o,onKeyUp:l=>{l.key==="Enter"&&u()},onChange:l=>{s(l.target.value)},ref:t}),a.createElement(q,{shouldWrapChildren:!0,hasArrow:!0,placement:"bottom",label:r("Search files")},a.createElement(W,{boxSize:7,cursor:"pointer",onClick:()=>{e.isSearch?u():e.setIsSearch(!0)},as:fr})))},gr=()=>{const{t:e}=T(),t=We(),r=Y(),{show:n,setShow:o,type:s,getSetting:u,files:f,multiSelect:l,selectFiles:d,meta:m,loggedIn:p}=c.exports.useContext(_),M=u("logo"),x=ie(M.split(",").shift(),M.split(",").pop()),F=c.exports.useRef(null),[j,I]=c.exports.useState(!1);return a.createElement(ce,{className:"header",px:"2",py:"2",justify:"space-between",w:"full"},a.createElement(K,{to:"/",className:"logo"},x.includes("http")?a.createElement(bt,{fallback:a.createElement(Z,{color:u("icon color")||"#1890ff"}),rounded:"lg",h:"44px",w:"auto",src:x}):a.createElement(ye,null,x)),a.createElement(D,{className:"buttons",spacing:"2"},["folder","search"].includes(s)&&a.createElement(pr,{isSearch:j,setIsSearch:I}),!j&&a.createElement(vt,{in:!j,offsetX:"20px",offsetY:0},a.createElement(D,{spacing:"2"},s==="file"&&a.createElement(q,{shouldWrapChildren:!0,hasArrow:!0,placement:"bottom",label:e("Download")},a.createElement(W,{cursor:"pointer",boxSize:6,as:It,onClick:()=>{if(s==="file"){let O=t();window.open(O,"_blank");return}}})),s==="folder"&&!u("no upload").split(",").includes(m.driver)&&(m.upload||p)&&a.createElement(B,null,a.createElement(q,{shouldWrapChildren:!0,hasArrow:!0,placement:"bottom",label:e("Upload file")},a.createElement(W,{cursor:"pointer",boxSize:6,as:Bt,onClick:()=>{F.current.upload()}})),a.createElement(dr,{ref:F})),s!=="error"&&a.createElement(q,{shouldWrapChildren:!0,hasArrow:!0,placement:"bottom",label:e("Copy direct link")},a.createElement(W,{cursor:"pointer",boxSize:6,as:or,onClick:()=>{let O="";if(s==="file")O=t();else{let h=f;l&&(h=d),O=h.filter(S=>S.type!==1).map(S=>t(S)).join(`
`)}rr(O),r({title:e("Copied"),status:"success",duration:3e3,isClosable:!0})}})),a.createElement(q,{shouldWrapChildren:!0,hasArrow:!0,placement:"bottom",label:e("switch to layout view",{layout:e(n==="list"?"grid":"list")})},a.createElement(W,{boxSize:6,cursor:"pointer",onClick:()=>{o(n==="list"?"grid":"list"),localStorage.setItem("show",n==="list"?"grid":"list")},as:n==="list"?Rt:Tt}))))))},mr=()=>{const{t:e}=T(),{getSetting:t}=c.exports.useContext(_);return a.createElement(G,{py:"4",className:"footer"},a.createElement(xe,null,a.createElement(D,{spacing:"2",className:"line0"},a.createElement(Te,{isExternal:!0,href:"https://github.com/Xhofe/alist"},e("Powered by {{project}}",{project:"Alist"})),a.createElement("span",null,"|"),a.createElement(K,{to:"/@manage"},e("Manage"))),t("site beian")&&a.createElement(Te,{className:"line1",isExternal:!0,href:"https://beian.miit.gov.cn/"},t("site beian"))))},hr=()=>{const e=H(),{t}=T();return a.createElement(yt,{spacing:"1",className:"nav",w:"full",px:"2"},a.createElement(Ae,null,a.createElement(ze,{_hover:{textDecoration:"none",bg:"rgba(132,133,141,0.18)"},p:"1",rounded:"lg",as:K,to:"/"},At("home emoji"),t("Home"))),e.pathname.slice(1).split("/").map((r,n)=>{const o=n===e.pathname.split("/").length-2,s=e.pathname.split("/").slice(0,n+2).join("/");return a.createElement(Ae,{key:s,isCurrentPage:o},a.createElement(ze,{isCurrentPage:o,wordBreak:"break-word",as:o?void 0:K,to:encodeURI(s),_hover:{textDecoration:"none",bg:"rgba(132,133,141,0.18)"},p:"1",rounded:"lg"},r))}))},wr=({msg:e})=>{const{t}=T();return a.createElement(B,{className:"error",textAlign:"center",py:10,px:6},a.createElement(ye,{display:"inline-block",size:"xl"},t("ERROR")),a.createElement(Q,{fontSize:"18px",my:3},t(e)),a.createElement(K,{to:"/"},a.createElement(le,{variant:"solid"},t("Back Home"))))};function br(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ye(Object(r),!0).forEach(function(n){br(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vr(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function yr(e,t){if(e==null)return{};var r=vr(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function xr(e,t){return Er(e)||Cr(e,t)||Sr(e,t)||Mr()}function Er(e){if(Array.isArray(e))return e}function Cr(e,t){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,o=!1,s=void 0;try{for(var u=e[Symbol.iterator](),f;!(n=(f=u.next()).done)&&(r.push(f.value),!(t&&r.length===t));n=!0);}catch(l){o=!0,s=l}finally{try{!n&&u.return!=null&&u.return()}finally{if(o)throw s}}return r}}function Sr(e,t){if(!!e){if(typeof e=="string")return Qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qe(e,t)}}function Qe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?et(Object(r),!0).forEach(function(n){Fr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Or(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return t.reduceRight(function(o,s){return s(o)},n)}}function te(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return o.length>=e.length?e.apply(this,o):function(){for(var u=arguments.length,f=new Array(u),l=0;l<u;l++)f[l]=arguments[l];return t.apply(r,[].concat(o,f))}}}function de(e){return{}.toString.call(e).includes("Object")}function kr(e){return!Object.keys(e).length}function re(e){return typeof e=="function"}function jr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _r(e,t){return de(t)||z("changeType"),Object.keys(t).some(function(r){return!jr(e,r)})&&z("changeField"),t}function Pr(e){re(e)||z("selectorType")}function Ir(e){re(e)||de(e)||z("handlerType"),de(e)&&Object.values(e).some(function(t){return!re(t)})&&z("handlersType")}function Br(e){e||z("initialIsRequired"),de(e)||z("initialType"),kr(e)&&z("initialContent")}function Rr(e,t){throw new Error(e[t]||e.default)}var Tr={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},z=te(Rr)(Tr),fe={changes:_r,selector:Pr,handler:Ir,initial:Br};function Ar(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};fe.initial(e),fe.handler(t);var r={current:e},n=te($r)(r,t),o=te(Lr)(r),s=te(fe.changes)(e),u=te(zr)(r);function f(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(m){return m};return fe.selector(d),d(r.current)}function l(d){Or(n,o,s,u)(d)}return[f,l]}function zr(e,t){return re(t)?t(e.current):t}function Lr(e,t){return e.current=tt(tt({},e.current),t),t}function $r(e,t,r){return re(t)?t(e.current):Object.keys(r).forEach(function(n){var o;return(o=t[n])===null||o===void 0?void 0:o.call(t,e.current[n])}),r}var Hr={create:Ar},Dr={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.33.0/min/vs"}};function Nr(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return o.length>=e.length?e.apply(this,o):function(){for(var u=arguments.length,f=new Array(u),l=0;l<u;l++)f[l]=arguments[l];return t.apply(r,[].concat(o,f))}}}function Ur(e){return{}.toString.call(e).includes("Object")}function Vr(e){return e||nt("configIsRequired"),Ur(e)||nt("configType"),e.urls?(qr(),{paths:{vs:e.urls.monacoBase}}):e}function qr(){console.warn(rt.deprecation)}function Wr(e,t){throw new Error(e[t]||e.default)}var rt={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},nt=Nr(Wr)(rt),Kr={config:Vr},Gr=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(o){return r.reduceRight(function(s,u){return u(s)},o)}};function at(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],at(e[r],t[r]))}),Ze(Ze({},e),t)}var Jr={type:"cancelation",msg:"operation is manually canceled"};function Se(e){var t=!1,r=new Promise(function(n,o){e.then(function(s){return t?o(Jr):n(s)}),e.catch(o)});return r.cancel=function(){return t=!0},r}var Xr=Hr.create({config:Dr,isInitialized:!1,resolve:null,reject:null,monaco:null}),ot=xr(Xr,2),ne=ot[0],pe=ot[1];function Yr(e){var t=Kr.config(e),r=t.monaco,n=yr(t,["monaco"]);pe(function(o){return{config:at(o.config,n),monaco:r}})}function Zr(){var e=ne(function(t){var r=t.monaco,n=t.isInitialized;return{monaco:r,isInitialized:n}});if(!e.isInitialized){if(pe({isInitialized:!0}),e.monaco)return Se(Promise.resolve(e.monaco));if(window.monaco&&window.monaco.editor)return st(window.monaco),Se(Promise.resolve(window.monaco));Gr(Qr,tn)(rn)}return Se(an)}function Qr(e){return document.body.appendChild(e)}function en(e){var t=document.createElement("script");return e&&(t.src=e),t}function tn(e){var t=ne(function(n){var o=n.config,s=n.reject;return{config:o,reject:s}}),r=en("".concat(t.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=t.reject,r}function rn(){var e=ne(function(r){var n=r.config,o=r.resolve,s=r.reject;return{config:n,resolve:o,reject:s}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){st(r),e.resolve(r)},function(r){e.reject(r)})}function st(e){ne().monaco||pe({monaco:e})}function nn(){return ne(function(e){var t=e.monaco;return t})}var an=new Promise(function(e,t){return pe({resolve:e,reject:t})}),on={config:Yr,init:Zr,__getMonacoInstance:nn};function Me(){return Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Me.apply(this,arguments)}const sn={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};function cn({content:e}){return a.createElement("div",{style:sn},e)}const Fe={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function it({width:e,height:t,isEditorReady:r,loading:n,_ref:o,className:s,wrapperProps:u}){return a.createElement("section",Me({style:Ie($({},Fe.wrapper),{width:e,height:t})},u),!r&&a.createElement(cn,{content:n}),a.createElement("div",{ref:o,style:$($({},Fe.fullWidth),!r&&Fe.hide),className:s}))}it.propTypes={width:i.oneOfType([i.number,i.string]).isRequired,height:i.oneOfType([i.number,i.string]).isRequired,loading:i.oneOfType([i.element,i.string]).isRequired,isEditorReady:i.bool.isRequired,className:i.string,wrapperProps:i.object};var ln=c.exports.memo(it);function un(e){c.exports.useEffect(e,[])}function J(e,t,r=!0){const n=c.exports.useRef(!0);c.exports.useEffect(n.current||!r?()=>{n.current=!1}:e,t)}function Oe(){}function ct(e,t,r,n){return dn(e,n)||fn(e,t,r,n)}function dn(e,t){return e.editor.getModel(lt(e,t))}function fn(e,t,r,n){return e.editor.createModel(t,r,n&&lt(e,n))}function lt(e,t){return e.Uri.parse(t)}function pn(e){return e===void 0}i.string,i.string,i.string,i.string,i.string,i.string,i.string,i.bool,i.bool,i.string,i.oneOfType([i.element,i.string]),i.object,i.oneOfType([i.number,i.string]),i.oneOfType([i.number,i.string]),i.string,i.object,i.func,i.func;function gn(e){const t=c.exports.useRef();return c.exports.useEffect(()=>{t.current=e},[e]),t.current}const ge=new Map;function ke({defaultValue:e,defaultLanguage:t,defaultPath:r,value:n,language:o,path:s,theme:u,line:f,loading:l,options:d,overrideServices:m,saveViewState:p,keepCurrentModel:M,width:x,height:F,className:j,wrapperProps:I,beforeMount:O,onMount:h,onChange:S,onValidate:P}){const[b,L]=c.exports.useState(!1),[A,ae]=c.exports.useState(!0),v=c.exports.useRef(null),g=c.exports.useRef(null),oe=c.exports.useRef(null),N=c.exports.useRef(h),he=c.exports.useRef(O),U=c.exports.useRef(null),C=c.exports.useRef(n),R=gn(s);un(()=>{const w=on.init();return w.then(E=>(v.current=E)&&ae(!1)).catch(E=>(E==null?void 0:E.type)!=="cancelation"&&console.error("Monaco initialization: error:",E)),()=>g.current?se():w.cancel()}),J(()=>{const w=ct(v.current,e||n,t||o,s);w!==g.current.getModel()&&(p&&ge.set(R,g.current.saveViewState()),g.current.setModel(w),p&&g.current.restoreViewState(ge.get(s)))},[s],b),J(()=>{g.current.updateOptions(d)},[d],b),J(()=>{g.current.getOption(v.current.editor.EditorOption.readOnly)?g.current.setValue(n):n!==g.current.getValue()&&(g.current.executeEdits("",[{range:g.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),g.current.pushUndoStop())},[n],b),J(()=>{v.current.editor.setModelLanguage(g.current.getModel(),o)},[o],b),J(()=>{pn(f)||g.current.revealLine(f)},[f],b),J(()=>{v.current.editor.setTheme(u)},[u],b);const y=c.exports.useCallback(()=>{he.current(v.current);const w=s||r,E=ct(v.current,n||e,t||o,w);g.current=v.current.editor.create(oe.current,$({model:E,automaticLayout:!0},d),m),p&&g.current.restoreViewState(ge.get(w)),v.current.editor.setTheme(u),L(!0)},[e,t,r,n,o,s,d,m,p,u]);c.exports.useEffect(()=>{b&&N.current(g.current,v.current)},[b]),c.exports.useEffect(()=>{!A&&!b&&y()},[A,b,y]),C.current=n,c.exports.useEffect(()=>{if(b&&S){var w,E;(w=U.current)===null||w===void 0||w.dispose(),U.current=(E=g.current)===null||E===void 0?void 0:E.onDidChangeModelContent(X=>{const V=g.current.getValue();C.current!==V&&S(V,X)})}},[b,S]),c.exports.useEffect(()=>{if(b){const w=v.current.editor.onDidChangeMarkers(E=>{var X;const V=(X=g.current.getModel())===null||X===void 0?void 0:X.uri;if(V&&E.find(we=>we.path===V.path)){const we=v.current.editor.getModelMarkers({resource:V});P==null||P(we)}});return()=>{w==null||w.dispose()}}},[b,P]);function se(){var w;if((w=U.current)===null||w===void 0||w.dispose(),M)p&&ge.set(s,g.current.saveViewState());else{var E;(E=g.current.getModel())===null||E===void 0||E.dispose()}g.current.dispose()}return a.createElement(ln,{width:x,height:F,isEditorReady:b,loading:l,_ref:oe,className:j,wrapperProps:I})}ke.propTypes={defaultValue:i.string,defaultPath:i.string,defaultLanguage:i.string,value:i.string,language:i.string,path:i.string,theme:i.string,line:i.number,loading:i.oneOfType([i.element,i.string]),options:i.object,overrideServices:i.object,saveViewState:i.bool,keepCurrentModel:i.bool,width:i.oneOfType([i.number,i.string]),height:i.oneOfType([i.number,i.string]),className:i.string,wrapperProps:i.object,beforeMount:i.func,onMount:i.func,onChange:i.func,onValidate:i.func};ke.defaultProps={theme:"light",loading:"Loading...",options:{},overrideServices:{},saveViewState:!0,keepCurrentModel:!1,width:"100%",height:"100%",wrapperProps:{},beforeMount:Oe,onMount:Oe,onValidate:Oe};var mn=c.exports.memo(ke);const hn=-1,wn=[],ut=({file:e,content:t,setContent:r})=>{const n=ie("light","dark"),{t:o}=T(),s=Y(),{pathname:u}=H(),f=()=>be(void 0,null,function*(){const l=u.substring(0,u.lastIndexOf("/")||1),d=new FormData;d.append("files",new Blob([t]),e.name),d.append("path",l),ue.post("upload",d,{headers:{"Content-Type":"multipart/form-data"}}).then(m=>{const p=m.data;s({title:o(p.message),status:p.code===200?"success":"error",duration:3e3,isClosable:!0})})});return a.createElement(B,null,a.createElement(mn,{height:"70vh",value:t,path:e.name,theme:n==="light"?"light":"vs-dark",onChange:l=>r(l!=null?l:"")}),a.createElement(ce,{m:"2"},a.createElement(xt,null),a.createElement(le,{mt:"5",onClick:f},o("Save"))))};var Gn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",type:hn,exts:wn,default:ut});const bn=5,vn=[],dt=({file:e,readme:t})=>{const[r,n]=a.useState(""),{getSetting:o,loggedIn:s}=c.exports.useContext(_);let u=We(!0)(e);const f=e.name.endsWith(".html"),[l,d]=a.useState("preview"),m=()=>{t&&e.type===-1&&(u=e.url),De.get(u,{responseType:"blob"}).then(p=>be(void 0,null,function*(){const M=p.data;let x=yield M.text();x.includes("\uFFFD")&&(x=new TextDecoder("gbk").decode(yield M.arrayBuffer())),n(x)}))};return c.exports.useEffect(()=>(m(),()=>{n("")}),[]),r?a.createElement(B,{w:"full"},a.createElement(D,null,f&&a.createElement(Le,{display:"flex",alignItems:"center",width:"auto",m:"1"},a.createElement($e,{htmlFor:"render",mb:"0"},"Render?"),a.createElement(He,{id:"render",isChecked:l==="render",onChange:()=>{d(l==="render"?"preview":"render")}})),!t&&s&&a.createElement(Le,{display:"flex",alignItems:"center",width:"auto",m:"1"},a.createElement($e,{htmlFor:"render",mb:"0"},"Edit?"),a.createElement(He,{id:"edit",isChecked:l==="edit",onChange:()=>{d(l==="edit"?"preview":"edit")}}))),l==="render"?a.createElement("iframe",{srcDoc:r,style:{width:"100%",borderRadius:"0.75rem",boxShadow:"#00000031 0px 1px 10px 5px",minHeight:"70vh"}}):l==="edit"?a.createElement(ut,{content:r,setContent:n,file:e}):a.createElement(B,{className:"markdown-body"},a.createElement(zt,null,e.name.endsWith(".md")?r:"```"+e.name.split(".").pop()+`
`+r+"\n```"))):a.createElement(G,{w:"full"},a.createElement(Z,{color:o("icon color"),size:"xl"}))};var Jn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",type:bn,exts:vn,default:dt});const yn={"dmg,ipa,plist":Wt,"exe,msi":Kt,"zip,gz,rar,7z,tar,jar,xz":Gt,apk:Jt,db:Xt,md:Yt,epub:Zt,iso:Qt,m3u8:Ne},xn=(e,t)=>{if(e!==1){for(const[r,n]of Object.entries(yn))if(r.split(",").includes(t.toLowerCase()))return n}switch(e){case 1:return sr;case 2:return t==="doc"||t==="docx"?Nt:t==="xls"||t==="xlsx"?Ut:t==="ppt"||t==="pptx"?Vt:qt;case 3:return Ne;case 4:return Dt;case 5:return Ht;case 6:return $t;default:return Lt}},En=e=>{const{getSetting:t}=c.exports.useContext(_);return a.createElement(B,{w:"full"},a.createElement(q,{placement:"bottom-start",label:Ge(e.path,e.name)},a.createElement(Et,{className:"result",p:"2",w:"full",rounded:"lg",transition:"all 0.3s",_hover:{transform:"scale(1.01)",bgColor:"rgba(132,133,141,0.18)"}},a.createElement(Ct,{as:K,to:encodeURI(Ge(e.path,e.name))},a.createElement(D,{spacing:2},a.createElement(ce,{className:"result-name",align:"center",w:{base:3/4,md:"50%"}},a.createElement(W,{color:t("icon color"),boxSize:6,as:xn(e.type,e.name.split(".").pop()||""),mr:2}),a.createElement(Q,{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",fontSize:"md"},e.name)),a.createElement(Q,{className:"result-size",w:{base:1/4,md:1/6},textAlign:"right"},Ke(e.size)),a.createElement(Q,{className:"result-path",w:{base:0,md:1/3},display:{base:"none",md:"unset"},textAlign:"right"},e.path))))))},Cn=()=>{const e=H(),[t,r]=c.exports.useState(!0),{getSetting:n}=c.exports.useContext(_),o=Y(),[s,u]=c.exports.useState([]),f=()=>{const d=new URLSearchParams(e.search),m=e.pathname,p=d.get("s");!p||(r(!0),ue.post("search",{path:m,keyword:p}).then(M=>{r(!1);const x=M.data;x.code===200?u(x.data):o({title:x.message,status:"error",duration:3e3,isClosable:!0})}))};c.exports.useEffect(()=>{f()},[e.search]);const{t:l}=T();return t?a.createElement(G,{w:"full",py:"4"},a.createElement(Z,{color:n("icon color")||"#1890ff",size:"xl"})):a.createElement(xe,{className:"results-box",w:"full"},a.createElement(D,{className:"results-title",w:"full",p:"2"},[{name:"name",base:2/3,md:"50%",textAlign:"left"},{name:"size",base:1/3,md:1/6,textAlign:"right"},{name:"path",base:0,md:1/3,textAlign:"right"}].map(d=>a.createElement(ce,{w:{base:d.base,md:d.md},key:d.name,align:"center"},a.createElement(Q,{w:"full",className:`results-title-${d.name}`,fontSize:"sm",fontWeight:"bold",color:"gray.500",textAlign:d.textAlign,cursor:"pointer",display:d.name==="path"?{base:"none",md:"unset"}:"unset"},l(d.name))))),s.map(d=>a.createElement(En,$({key:d.name},d))))},Sn=c.exports.lazy(()=>Ue(()=>import(""+(window.__dynamicImportHandler__||function(e){return e})("./index.00a76fbd.js")+""),(window.__dynamicImportPreload__ || function(importer) { return importer; })(["assets/index.00a76fbd.js","assets/index.884c354a.css","assets/vendor.53f783ab.js","assets/index.esm.b0b0f889.js","assets/index.esm.5483c5f7.css","assets/index.12fd3178.js","assets/clsx.m.c6439cc2.js","assets/copy-clip.08e8f9de.js"]))),Mn=c.exports.lazy(()=>Ue(()=>import(""+(window.__dynamicImportHandler__||function(e){return e})("./file.bbeef4e6.js")+""),(window.__dynamicImportPreload__ || function(importer) { return importer; })(["assets/file.bbeef4e6.js","assets/file.450b80be.css","assets/vendor.53f783ab.js","assets/clsx.m.c6439cc2.js","assets/index.esm.b0b0f889.js","assets/index.esm.5483c5f7.css","assets/index.12fd3178.js","assets/useTitle.de6d2013.js","assets/copy-clip.08e8f9de.js"]))),Fn=()=>{const e=ie("white","gray.700");T();const{getSetting:t,setPassword:r,password:n,settingLoaded:o,type:s,msg:u,files:f,meta:l}=c.exports.useContext(_),d=c.exports.useMemo(()=>{if(s==="file")return;const m={name:"README.md",size:0,type:-1,driver:"local",updated_at:"",thumbnail:"",url:l.readme};if(l.readme)return m;const p=f.find(M=>M.name.toLowerCase()==="readme.md");if(p)return p;if(t("global readme url"))return m.url=t("global readme url"),m},[f,s,o]);return a.createElement(G,{className:"index-box",w:"full"},a.createElement(er,{list:!0}),a.createElement(xe,{className:"root-box",w:{base:"95%",lg:"980px"}},a.createElement(gr,null),a.createElement(hr,null),a.createElement(B,{className:"main-box",rounded:"xl",shadow:"lg",bgColor:e,w:"full"},s==="loading"?a.createElement(G,{w:"full",py:"4"},a.createElement(Z,{color:t("icon color")||"#1890ff",size:"xl"})):a.createElement(B,{className:"content-box",w:"full",p:"2"},a.createElement(c.exports.Suspense,{fallback:a.createElement(G,{h:"full"},a.createElement(Z,{color:t("icon color")||"#1890ff",size:"xl"}))},s==="folder"||s==="nexting"?a.createElement(Sn,null):s==="file"?a.createElement(Mn,null):s==="search"?a.createElement(Cn,null):a.createElement(wr,{msg:u})))),s==="folder"&&d&&a.createElement(B,{className:"readme-box",rounded:"xl",shadow:"lg",bgColor:e,w:"full",p:"4"},a.createElement(dt,{file:d,readme:!0})),a.createElement(mr,null)))};const On=(e,t)=>{const r=c.exports.useRef(!1);c.exports.useEffect(()=>{r.current?e():r.current=!0},t)},kn=e=>{const[t,r]=c.exports.useState({current:!1}),n=c.exports.useCallback(()=>{r({current:!0})},[t]);return c.exports.useEffect(()=>{t.current===!0&&r({current:!1})},[t]),c.exports.useEffect(()=>{t.current&&e()}),n};let je=!1,me=!1;const jn=e=>{const{type:t,setType:r,setSelectFiles:n,setFiles:o,setLastFiles:s,files:u,setMsg:f,sort:l,password:d,setPassword:m,setMeta:p,getSetting:M,setPage:x,page:F,settingLoaded:j}=c.exports.useContext(_),{t:I}=T(),O=Re(),h=H(),S=Y(),{path:P,cancelPath:b}=ar(),L=kn(()=>{if(!j||g())return;b(),console.log("refresh"),console.log(F);const C=M("load type");t==="folder"&&s(u),F.page_num===1||C==="all"||C==="pagination"?(r("loading"),n([]),o([])):r("nexting"),P().then(R=>{const y=R.data;f(y.message),y.code===200?(y.data.type==="file"?o(y.data.files):F.page_num===1||C==="all"||C==="pagination"?o(A(y.data.files)):o([...u,...y.data.files]),p(y.data.meta),r(y.data.type)):(y.code===401&&me&&(S({title:I(y.message),status:"error",duration:3e3,isClosable:!0}),me=!1),y.code===1001&&(S({title:I(y.message),status:"warning",duration:3e3,isClosable:!0}),O.push("/@manage")),y.code===401?r("unauthorized"):r("error"))})}),A=C=>{const{orderBy:R,reverse:y}=l;return R?C.sort((se,w)=>se[R]<w[R]?y?1:-1:se[R]>w[R]?y?-1:1:0):C},ae=()=>{if(je){je=!1;return}L()},v=()=>{F.page_num!==1&&(je=!0,x({page_num:1,page_size:F.page_size})),L()};c.exports.useEffect(()=>{const C=A(u);o([...C])},[l]),c.exports.useEffect(()=>(v(),Ce.on("refresh",v),()=>{Ce.off("refresh",v)}),[h.pathname]),On(()=>{ae()},[F]);const g=()=>new URLSearchParams(h.search).get("s")?(r("search"),!0):!1;c.exports.useEffect(()=>{g()||v()},[h.search]);const{isOpen:oe,onClose:N,onOpen:he}=Be(),U=a.useRef();return c.exports.useEffect(()=>{t==="unauthorized"&&he()},[t]),a.createElement(a.Fragment,null,a.createElement(a.Fragment,$({},e)),a.createElement(St,{initialFocusRef:U,isOpen:oe,onClose:()=>{N()}},a.createElement(Mt,null),a.createElement(Ft,null,a.createElement(Ot,null,I("Input password")),a.createElement(kt,null),a.createElement(jt,{pb:6},a.createElement(ve,{type:"password",ref:U,value:d,onChange:C=>{m(C.target.value)},onKeyUp:C=>{C.key==="Enter"&&(localStorage.setItem("password",d),me=!0,L(),N())}})),a.createElement(_t,null,a.createElement(le,{onClick:()=>{localStorage.setItem("password",d),me=!0,L(),N()},mr:3},I("Ok")),a.createElement(le,{colorScheme:"gray",onClick:()=>{O.goBack(),N()}},I("Cancel"))))))},_n=()=>a.createElement(tr,null,a.createElement(jn,null,a.createElement(Fn,null)));var Xn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_n});export{Un as F,sr as I,Gn as _,lr as a,ar as b,Ce as c,Wn as d,We as e,Kn as f,qn as g,Hn as h,$n as i,Dn as j,Vn as k,zn as l,qe as m,Nn as n,Ln as o,Ge as p,xn as q,Ke as r,Jn as s,Xn as t,ir as u};
